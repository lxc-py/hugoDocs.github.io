<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>My New Hugo Site</title>
<meta name="description" content="title: &amp;lsquo;Semi-automatic and Automatic Annotation&amp;rsquo; linkTitle: &amp;lsquo;Installation Auto Annotation&amp;rsquo; weight: 10 description: &amp;lsquo;Information about the installation of components needed for semi-automatic and automatic annotation.&amp;rsquo;
⚠ WARNING: Do not use docker compose up If you did, make sure all containers are stopped by docker compose down.
To bring up cvat with auto annotation tool, from cvat root directory, you need to run:
docker compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml up -d If you did any changes to the Docker Compose files, make sure to add --build at the end.">
<meta property="og:url" content="http://localhost:1313/en/docs/administration/advanced/installation_automatic_annotation/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="My New Hugo Site">
  <meta property="og:description" content="title: ‘Semi-automatic and Automatic Annotation’ linkTitle: ‘Installation Auto Annotation’ weight: 10 description: ‘Information about the installation of components needed for semi-automatic and automatic annotation.’
⚠ WARNING: Do not use docker compose up If you did, make sure all containers are stopped by docker compose down.
To bring up cvat with auto annotation tool, from cvat root directory, you need to run:
docker compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml up -d If you did any changes to the Docker Compose files, make sure to add --build at the end.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="en">

  <meta itemprop="name" content="My New Hugo Site">
  <meta itemprop="description" content="title: &lsquo;Semi-automatic and Automatic Annotation&rsquo; linkTitle: &lsquo;Installation Auto Annotation&rsquo; weight: 10 description: &lsquo;Information about the installation of components needed for semi-automatic and automatic annotation.&rsquo;
⚠ WARNING: Do not use docker compose up If you did, make sure all containers are stopped by docker compose down.
To bring up cvat with auto annotation tool, from cvat root directory, you need to run:
docker compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml up -d If you did any changes to the Docker Compose files, make sure to add --build at the end.">
  <meta itemprop="wordCount" content="613"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="">
<meta name="twitter:description" content="title: &lsquo;Semi-automatic and Automatic Annotation&rsquo; linkTitle: &lsquo;Installation Auto Annotation&rsquo; weight: 10 description: &lsquo;Information about the installation of components needed for semi-automatic and automatic annotation.&rsquo;
⚠ WARNING: Do not use docker compose up If you did, make sure all containers are stopped by docker compose down.
To bring up cvat with auto annotation tool, from cvat root directory, you need to run:
docker compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml up -d If you did any changes to the Docker Compose files, make sure to add --build at the end.">





<link href="/scss/main.css" rel="stylesheet">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="90pt" height="47pt" viewBox="0 0 152 47"><g transform="translate(0.000000,47.000000) scale(0.100000,-0.100000)" fill="#fff" stroke="none"><path d="M194 416c-50-22-51-34-3-80 24-22 33-29 20-14-30 34-19 51 30 46 34-3 44 1 71 29l32 33h-60c-32-1-73-7-90-14z"/><path d="M588 307c34-35 42-50 42-80s4-37 20-37 20 7 20 37 8 45 42 80c40 40 41 43 18 43-13 0-37-12-52-27l-28-27-28 27c-15 15-39 27-52 27-23 0-22-3 18-43z"/><path d="M795 341c-3-5-2-41 1-80 5-50 11-71 20-71 10 0 14 15 14 50 0 28 4 50 8 50 5 0 19-11 32-25s27-25 31-25 21 11 37 25c17 14 33 25 36 25s6-22 6-50c0-38 4-50 15-50 12 0 15 16 15 80 0 70-2 80-18 80-10 0-33-16-52-35l-33-34-39 34c-38 35-62 43-73 26z"/><path d="M1080 335c0-12 13-15 57-15h57l-57-58c-31-32-57-61-57-65s41-7 90-7c73 0 90 3 90 15s-13 15-57 15l-58 1 58 54c-33 30 56 59 52 64-3 7-42 11-91 11-68 0-84-3-84-15z"/><path d="M350 268c-52-11-96-21-98-22-1-2 4-20 11-42 32-92 34-89-33-86-58 4-60 5-60 32 0 15-7 33-15 40-25 21-18 42 12 38 49-6 36 20-17 31-84 18-83 18-78-42 9-112 81-187 187-195 78-6 121 10 169 62 51 56 76 139 56 190-7 19-14 19-134-6zm-30-63c-12-15-30-12-30 6 0 5 10 9 21 9 18 0 19-2 9-15z"/></g></svg></span><span class="navbar-brand__name">My New Hugo Site</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/en/docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/en/about/"><span>About</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-default td-outer">
      <main role="main" class="td-main">
        <!-- raw HTML omitted -->
<hr>
<p>title: &lsquo;Semi-automatic and Automatic Annotation&rsquo;
linkTitle: &lsquo;Installation Auto Annotation&rsquo;
weight: 10
description: &lsquo;Information about the installation of components needed for semi-automatic and automatic annotation.&rsquo;</p>
<hr>
<!-- raw HTML omitted -->
<blockquote>
<p><strong>⚠ WARNING: Do not use <code>docker compose up</code></strong>
If you did, make sure all containers are stopped by <code>docker compose down</code>.</p>
</blockquote>
<ul>
<li>
<p>To bring up cvat with auto annotation tool, from cvat root directory, you need to run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml up -d
</span></span></code></pre></div><p>If you did any changes to the Docker Compose files, make sure to add <code>--build</code> at the end.</p>
<p>To stop the containers, simply run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml down
</span></span></code></pre></div></li>
<li>
<p>You have to install <code>nuctl</code> command line tool to build and deploy serverless
functions. Download <a href="https://github.com/nuclio/nuclio/releases/tag/1.11.24">version 1.11.24</a>.
It is important that the version you download matches the version in
<a href="https://github.com/cvat-ai/cvat/blob/develop/components/serverless/docker-compose.serverless.yml">docker-compose.serverless.yml</a>.
For example, using wget.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wget https://github.com/nuclio/nuclio/releases/download/&lt;version&gt;/nuctl-&lt;version&gt;-linux-amd64
</span></span></code></pre></div><p>After downloading the nuclio, give it a proper permission and do a softlink.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo chmod +x nuctl-&lt;version&gt;-linux-amd64
</span></span><span style="display:flex;"><span>sudo ln -sf <span style="color:#66d9ef">$(</span>pwd<span style="color:#66d9ef">)</span>/nuctl-&lt;version&gt;-linux-amd64 /usr/local/bin/nuctl
</span></span></code></pre></div></li>
<li>
<p>Deploy a couple of functions.
This will automatically create a <code>cvat</code> Nuclio project to contain the functions.
Commands below should be run only after CVAT has been installed
using <code>docker compose</code> because it runs nuclio dashboard which manages all serverless functions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./serverless/deploy_cpu.sh serverless/openvino/dextr
</span></span><span style="display:flex;"><span>./serverless/deploy_cpu.sh serverless/openvino/omz/public/yolo-v3-tf
</span></span></code></pre></div><h4 id="gpu-support">GPU Support</h4>
<p>You will need to install <a href="https://www.tensorflow.org/install/docker#gpu_support">Nvidia Container Toolkit</a>.
Also you will need to add <code>--resource-limit nvidia.com/gpu=1 --triggers '{&quot;myHttpTrigger&quot;: {&quot;maxWorkers&quot;: 1}}'</code> to
the nuclio deployment command. You can increase the maxWorker if you have enough GPU memory.
As an example, below will run on the GPU:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nuctl deploy --project-name cvat <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --path serverless/tensorflow/matterport/mask_rcnn/nuclio <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --platform local --base-image tensorflow/tensorflow:1.15.5-gpu-py3 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --desc <span style="color:#e6db74">&#34;GPU based implementation of Mask RCNN on Python 3, Keras, and TensorFlow.&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --image cvat/tf.matterport.mask_rcnn_gpu <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --triggers <span style="color:#e6db74">&#39;{&#34;myHttpTrigger&#34;: {&#34;maxWorkers&#34;: 1}}&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --resource-limit nvidia.com/gpu<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p><strong>Note:</strong></p>
<ul>
<li>The number of GPU deployed functions will be limited to your GPU memory.</li>
<li>See <a href="https://github.com/cvat-ai/cvat/blob/develop/serverless/deploy_gpu.sh">deploy_gpu.sh</a>
script for more examples.</li>
<li>For some models (namely <a href="/docs/manual/advanced/ai-tools#trackers">SiamMask</a>) you need an <a href="https://www.nvidia.com/en-us/drivers/unix/">Nvidia driver</a>
version greater than or equal to 450.80.02.</li>
</ul>
<p><strong>Note for Windows users:</strong></p>
<p>If you want to use nuclio under Windows CVAT installation you should install Nvidia drivers for WSL according to
<a href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html">this</a> instruction and follow the steps up to “2.3 Installing Nvidia drivers”.
Important requirement: you should have the latest versions of Docker Desktop, Nvidia drivers for WSL,
and the latest updates from the Windows Insider Preview Dev channel.</p>
</li>
</ul>
<p><strong>Troubleshooting Nuclio Functions:</strong></p>
<ul>
<li>
<p>You can open nuclio dashboard at <a href="http://localhost:8070">localhost:8070</a>.
Make sure status of your functions are up and running without any error.</p>
</li>
<li>
<p>Test your deployed DL model as a serverless function. The command below should work on Linux and Mac OS.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>image<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl https://upload.wikimedia.org/wikipedia/en/7/7d/Lenna_%28test_image%29.png --output - | base64 | tr -d <span style="color:#e6db74">&#39;\n&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt; EOF &gt; /tmp/input.json
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{&#34;image&#34;: &#34;$image&#34;}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>cat /tmp/input.json | nuctl invoke openvino-omz-public-yolo-v3-tf -c <span style="color:#e6db74">&#39;application/json&#39;</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>20.07.17 12:07:44.519    nuctl.platform.invoker <span style="color:#f92672">(</span>I<span style="color:#f92672">)</span> Executing <span style="color:#66d9ef">function</span> <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;method&#34;</span>: <span style="color:#e6db74">&#34;POST&#34;</span>, <span style="color:#e6db74">&#34;url&#34;</span>: <span style="color:#e6db74">&#34;http://:57308&#34;</span>, <span style="color:#e6db74">&#34;headers&#34;</span>: <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;Content-Type&#34;</span>:<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;application/json&#34;</span><span style="color:#f92672">]</span>,<span style="color:#e6db74">&#34;X-Nuclio-Log-Level&#34;</span>:<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">]</span>,<span style="color:#e6db74">&#34;X-Nuclio-Target&#34;</span>:<span style="color:#f92672">[</span><span style="color:#e6db74">&#34;openvino-omz-public-yolo-v3-tf&#34;</span><span style="color:#f92672">]}}</span>
</span></span><span style="display:flex;"><span>20.07.17 12:07:45.275    nuctl.platform.invoker <span style="color:#f92672">(</span>I<span style="color:#f92672">)</span> Got response <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;200 OK&#34;</span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>20.07.17 12:07:45.275                     nuctl <span style="color:#f92672">(</span>I<span style="color:#f92672">)</span> &gt;&gt;&gt; Start of <span style="color:#66d9ef">function</span> logs
</span></span><span style="display:flex;"><span>20.07.17 12:07:45.275 ino-omz-public-yolo-v3-tf <span style="color:#f92672">(</span>I<span style="color:#f92672">)</span> Run yolo-v3-tf model <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;worker_id&#34;</span>: <span style="color:#e6db74">&#34;0&#34;</span>, <span style="color:#e6db74">&#34;time&#34;</span>: 1594976864570.9353<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>20.07.17 12:07:45.275                     nuctl <span style="color:#f92672">(</span>I<span style="color:#f92672">)</span> <span style="color:#f92672">&lt;&lt;&lt;</span> End of <span style="color:#66d9ef">function</span> logs
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; Response headers:
</span></span><span style="display:flex;"><span>Date <span style="color:#f92672">=</span> Fri, <span style="color:#ae81ff">17</span> Jul <span style="color:#ae81ff">2020</span> 09:07:45 GMT
</span></span><span style="display:flex;"><span>Content-Type <span style="color:#f92672">=</span> application/json
</span></span><span style="display:flex;"><span>Content-Length <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>Server <span style="color:#f92672">=</span> nuclio
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; Response body:
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;confidence&#34;</span>: <span style="color:#e6db74">&#34;0.9992254&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;label&#34;</span>: <span style="color:#e6db74">&#34;person&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;points&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>            39,
</span></span><span style="display:flex;"><span>            124,
</span></span><span style="display:flex;"><span>            408,
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">512</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">]</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;type&#34;</span>: <span style="color:#e6db74">&#34;rectangle&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">]</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
</li>
<li>
<p>To check for internal server errors, run <code>docker ps -a</code> to see the list of containers.
Find the container that you are interested, e.g., <code>nuclio-nuclio-tf-faster-rcnn-inception-v2-coco-gpu</code>.
Then check its logs by <code>docker logs &lt;name of your container&gt;</code>
e.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker logs nuclio-nuclio-tf-faster-rcnn-inception-v2-coco-gpu
</span></span></code></pre></div></li>
<li>
<p>To debug a code inside a container, you can use vscode to attach to a container <a href="https://code.visualstudio.com/docs/remote/attach-container">instructions</a>.
To apply your changes, make sure to restart the container.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker restart &lt;name_of_the_container&gt;
</span></span></code></pre></div></li>
</ul>

      </main>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.js"></script>
<script defer src="/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>