<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Upgrade guide | My New Hugo Site</title>
<meta name="description" content="Instructions for upgrading CVAT deployed with docker compose">
<meta property="og:url" content="http://localhost:1313/en/docs/administration/advanced/upgrade_guide/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="Upgrade guide">
  <meta property="og:description" content="Instructions for upgrading CVAT deployed with docker compose">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="en">

  <meta itemprop="name" content="Upgrade guide">
  <meta itemprop="description" content="Instructions for upgrading CVAT deployed with docker compose">
  <meta itemprop="wordCount" content="519"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Upgrade guide">
<meta name="twitter:description" content="Instructions for upgrading CVAT deployed with docker compose">





<link href="/scss/main.css" rel="stylesheet">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="90pt" height="47pt" viewBox="0 0 152 47"><g transform="translate(0.000000,47.000000) scale(0.100000,-0.100000)" fill="#fff" stroke="none"><path d="M194 416c-50-22-51-34-3-80 24-22 33-29 20-14-30 34-19 51 30 46 34-3 44 1 71 29l32 33h-60c-32-1-73-7-90-14z"/><path d="M588 307c34-35 42-50 42-80s4-37 20-37 20 7 20 37 8 45 42 80c40 40 41 43 18 43-13 0-37-12-52-27l-28-27-28 27c-15 15-39 27-52 27-23 0-22-3 18-43z"/><path d="M795 341c-3-5-2-41 1-80 5-50 11-71 20-71 10 0 14 15 14 50 0 28 4 50 8 50 5 0 19-11 32-25s27-25 31-25 21 11 37 25c17 14 33 25 36 25s6-22 6-50c0-38 4-50 15-50 12 0 15 16 15 80 0 70-2 80-18 80-10 0-33-16-52-35l-33-34-39 34c-38 35-62 43-73 26z"/><path d="M1080 335c0-12 13-15 57-15h57l-57-58c-31-32-57-61-57-65s41-7 90-7c73 0 90 3 90 15s-13 15-57 15l-58 1 58 54c-33 30 56 59 52 64-3 7-42 11-91 11-68 0-84-3-84-15z"/><path d="M350 268c-52-11-96-21-98-22-1-2 4-20 11-42 32-92 34-89-33-86-58 4-60 5-60 32 0 15-7 33-15 40-25 21-18 42 12 38 49-6 36 20-17 31-84 18-83 18-78-42 9-112 81-187 187-195 78-6 121 10 169 62 51 56 76 139 56 190-7 19-14 19-134-6zm-30-63c-12-15-30-12-30 6 0 5 10 9 21 9 18 0 19-2 9-15z"/></g></svg></span><span class="navbar-brand__name">My New Hugo Site</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/en/docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/en/about/"><span>About</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-default td-outer">
      <main role="main" class="td-main">
        <!-- raw HTML omitted -->
<h2 id="upgrade-guide">Upgrade guide</h2>
<p>Note: updating CVAT from version 2.2.0 to version 2.3.0 requires additional manual actions with database data due to
upgrading PostgreSQL base image major version. See details <a href="#how-to-upgrade-postgresql-database-base-image">here</a></p>
<p>To upgrade CVAT, follow these steps:</p>
<ul>
<li>
<p>It is highly recommended backup all CVAT data before updating, follow the
<a href="/docs/administration/advanced/backup_guide/">backup guide</a> and backup all CVAT volumes.</p>
</li>
<li>
<p>Go to the previously cloned CVAT directory and stop all CVAT containers with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker compose down
</span></span></code></pre></div><p>If you have included <a href="/docs/administration/basics/installation/#additional-components">additional components</a>,
include all compose configuration files that are used, e.g.:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker compose -f docker-compose.yml -f components/serverless/docker-compose.serverless.yml down
</span></span></code></pre></div></li>
<li>
<p>Update CVAT source code by any preferable way: clone with git or download zip file from GitHub.
Note that you need to download the entire source code, not just the Docker Compose configuration file.
Check the
<a href="/docs/administration/basics/installation/#how-to-get-cvat-source-code">installation guide</a> for details.</p>
</li>
<li>
<p>Verify settings:
The installation process is changed/modified from version to version and
you may need to export some environment variables, for example
<a href="/docs/administration/basics/installation/#use-your-own-domain">CVAT_HOST</a>.</p>
</li>
<li>
<p>Update local CVAT images.
Pull or build new CVAT images, see
<a href="/docs/administration/basics/installation/#how-to-pullbuildupdate-cvat-images">How to pull/build/update CVAT images section</a>
for details.</p>
</li>
<li>
<p>Start CVAT with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker compose up -d
</span></span></code></pre></div><p>When CVAT starts, it will upgrade its DB in accordance with the latest schema.
It can take time especially if you have a lot of data.
Please do not terminate the migration and wait till the process is complete.
You can monitor the startup process with the following command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker logs cvat_server -f
</span></span></code></pre></div></li>
</ul>
<h2 id="how-to-upgrade-cvat-from-v220-to-v230">How to upgrade CVAT from v2.2.0 to v2.3.0.</h2>
<p>Step by step commands how to upgrade CVAT from v2.2.0 to v2.3.0.
Let&rsquo;s assume that you have CVAT v2.2.0 working.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker exec -it cvat_db pg_dumpall &gt; cvat.db.dump
</span></span><span style="display:flex;"><span>cd cvat
</span></span><span style="display:flex;"><span>docker compose down
</span></span><span style="display:flex;"><span>docker volume rm cvat_cvat_db
</span></span><span style="display:flex;"><span>export CVAT_VERSION<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;v2.3.0&#34;</span>
</span></span><span style="display:flex;"><span>cd ..
</span></span><span style="display:flex;"><span>mv cvat cvat_220
</span></span><span style="display:flex;"><span>wget https://github.com/opencv/cvat/archive/refs/tags/<span style="color:#e6db74">${</span>CVAT_VERSION<span style="color:#e6db74">}</span>.zip
</span></span><span style="display:flex;"><span>unzip <span style="color:#e6db74">${</span>CVAT_VERSION<span style="color:#e6db74">}</span>.zip <span style="color:#f92672">&amp;&amp;</span> mv cvat-<span style="color:#e6db74">${</span>CVAT_VERSION:1<span style="color:#e6db74">}</span> cvat
</span></span><span style="display:flex;"><span>unset CVAT_VERSION
</span></span><span style="display:flex;"><span>cd cvat
</span></span><span style="display:flex;"><span>export CVAT_HOST<span style="color:#f92672">=</span>cvat.example.com
</span></span><span style="display:flex;"><span>export ACME_EMAIL<span style="color:#f92672">=</span>example@example.com
</span></span><span style="display:flex;"><span>docker compose pull
</span></span><span style="display:flex;"><span>docker compose up -d cvat_db
</span></span><span style="display:flex;"><span>docker exec -i cvat_db psql -q -d postgres &lt; ../cvat.db.dump
</span></span><span style="display:flex;"><span>docker compose -f docker-compose.yml -f docker-compose.dev.yml -f docker-compose.https.yml up -d
</span></span></code></pre></div><h2 id="how-to-upgrade-cvat-from-v170-to-v220">How to upgrade CVAT from v1.7.0 to v2.2.0.</h2>
<p>Step by step commands how to upgrade CVAT from v1.7.0 to v2.2.0.
Let&rsquo;s assume that you have CVAT v1.7.0 working.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>export CVAT_VERSION<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;v2.2.0&#34;</span>
</span></span><span style="display:flex;"><span>cd cvat
</span></span><span style="display:flex;"><span>docker compose down
</span></span><span style="display:flex;"><span>cd ..
</span></span><span style="display:flex;"><span>mv cvat cvat_170
</span></span><span style="display:flex;"><span>wget https://github.com/opencv/cvat/archive/refs/tags/<span style="color:#e6db74">${</span>CVAT_VERSION<span style="color:#e6db74">}</span>.zip
</span></span><span style="display:flex;"><span>unzip <span style="color:#e6db74">${</span>CVAT_VERSION<span style="color:#e6db74">}</span>.zip <span style="color:#f92672">&amp;&amp;</span> mv cvat-<span style="color:#e6db74">${</span>CVAT_VERSION:1<span style="color:#e6db74">}</span> cvat
</span></span><span style="display:flex;"><span>cd cvat
</span></span><span style="display:flex;"><span>docker pull cvat/server:<span style="color:#e6db74">${</span>CVAT_VERSION<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>docker tag cvat/server:<span style="color:#e6db74">${</span>CVAT_VERSION<span style="color:#e6db74">}</span> openvino/cvat_server:latest
</span></span><span style="display:flex;"><span>docker pull cvat/ui:<span style="color:#e6db74">${</span>CVAT_VERSION<span style="color:#e6db74">}</span>
</span></span><span style="display:flex;"><span>docker tag cvat/ui:<span style="color:#e6db74">${</span>CVAT_VERSION<span style="color:#e6db74">}</span> openvino/cvat_ui:latest
</span></span><span style="display:flex;"><span>docker compose up -d
</span></span></code></pre></div><h2 id="how-to-upgrade-postgresql-database-base-image">How to upgrade PostgreSQL database base image</h2>
<ol>
<li>
<p>It is highly recommended backup all CVAT data before updating, follow the
<a href="/docs/administration/advanced/backup_guide/">backup guide</a> and backup CVAT database volume.</p>
</li>
<li>
<p>Run previously used CVAT version as usual</p>
</li>
<li>
<p>Backup current database with <code>pg_dumpall</code> tool:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker exec -it cvat_db pg_dumpall &gt; cvat.db.dump
</span></span></code></pre></div></li>
<li>
<p>Stop CVAT:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker compose down
</span></span></code></pre></div></li>
<li>
<p>Delete current PostgreSQL’s volume, that&rsquo;s why it&rsquo;s important to have a backup:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker volume rm cvat_cvat_db
</span></span></code></pre></div></li>
<li>
<p>Update CVAT source code by any preferable way: clone with git or download zip file from GitHub.
Check the
<a href="/docs/administration/basics/installation/#how-to-get-cvat-source-code">installation guide</a> for details.</p>
</li>
<li>
<p>Start database container only:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker compose up -d cvat_db
</span></span></code></pre></div></li>
<li>
<p>Import PostgreSQL dump into new DB container:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker exec -i cvat_db psql -q -d postgres &lt; cvat.db.dump
</span></span></code></pre></div></li>
<li>
<p>Start CVAT:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker compose up -d
</span></span></code></pre></div></li>
</ol>

      </main>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        
      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.js"></script>
<script defer src="/js/click-to-copy.js" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>